<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Eco Tag - Análisis de Sostenibilidad</title>
    <meta name="description" content="Plataforma de análisis de sostenibilidad para productos empresariales">
    <meta name="theme-color" content="#2ecc71">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <meta name="apple-mobile-web-app-title" content="Eco Tag">
    
    <!-- Preload crítico -->
    <link rel="preload" href="styles.css" as="style">
    <link rel="preload" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" as="style">
    
    <!-- Estilos -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="styles.css">
    
    <!-- Favicon -->
    <link rel="icon" href="assets/icons/icon-192.png">
    <link rel="apple-touch-icon" href="assets/icons/icon-192.png">
    <link rel="manifest" href="manifest.json">
    
    <!-- PayPal SDK -->
    <script src="https://www.paypal.com/sdk/js?client-id=AQqNzMrTjsamx006fwvKVOfuwd4emeA963GYIQH2k5i7qqxI3S9VjlMRUMRYKXbrO84KUfFlIy3DPNhO&vault=true&intent=subscription"></script>
</head>
<body>
    <!-- Loading optimizado -->
    <div id="loadingOverlay" class="loading-overlay">
        <div class="spinner"></div>
        <p>Cargando Eco Tag...</p>
    </div>

    <!-- Header -->
    <header>
        <div class="container header-container">
            <div class="logo">
                <i class="fas fa-leaf"></i>
                <h1>Eco Tag</h1>
            </div>
            
            <nav>
                <ul>
                    <li><a href="#home" class="active">Inicio</a></li>
                    <li><a href="#features">Características</a></li>
                    <li><a href="#scanner">Escáner</a></li>
                    <li><a href="#pricing">Precios</a></li>
                    <li><a href="#contact">Contacto</a></li>
                </ul>
            </nav>
            
            <div class="auth-buttons">
                <button class="btn btn-outline" id="loginBtn">Iniciar Sesión</button>
                <button class="btn btn-primary" id="registerBtn">Registrarse</button>
            </div>

            <div class="user-menu">
                <span id="userEmail"></span>
                <button class="btn btn-outline" id="dashboardBtn">Dashboard</button>
                <button class="btn btn-danger" id="logoutBtn">Cerrar Sesión</button>
            </div>
            
            <button class="mobile-menu-btn" id="mobileMenuBtn">
                <i class="fas fa-bars"></i>
            </button>
        </div>
    </header>

    <!-- Hero Section -->
    <section class="hero" id="home">
        <div class="container">
            <h2>Impulsa la Sostenibilidad de tus Productos</h2>
            <p>Analiza, mejora y comunica el impacto ambiental de tus productos con tecnología avanzada y escaneo inteligente.</p>
            <div class="hero-buttons">
                <button class="btn btn-primary" id="startBtn">Comenzar Ahora</button>
                <button class="btn btn-outline" id="demoBtn">Ver Demo</button>
            </div>
        </div>
    </section>

    <!-- Features Section -->
    <section class="features" id="features">
        <div class="container">
            <div class="section-title">
                <h2>Características Principales</h2>
                <p>Descubre cómo Eco Tag transforma tu gestión de sostenibilidad</p>
            </div>
            <div class="features-grid">
                <div class="feature-card">
                    <i class="fas fa-camera"></i>
                    <h3>Escaneo Inteligente</h3>
                    <p>Escanea códigos de barras y analiza productos en segundos con nuestra tecnología avanzada</p>
                </div>
                <div class="feature-card">
                    <i class="fas fa-chart-line"></i>
                    <h3>Análisis Detallado</h3>
                    <p>Obtén puntuaciones de sostenibilidad y recomendaciones personalizadas para mejorar</p>
                </div>
                <div class="feature-card">
                    <i class="fas fa-database"></i>
                    <h3>Base de Datos Global</h3>
                    <p>Accede a nuestra extensa base de datos de productos y materiales sostenibles</p>
                </div>
                <div class="feature-card">
                    <i class="fas fa-file-pdf"></i>
                    <h3>Reportes Automáticos</h3>
                    <p>Genera reportes detallados y comparte los resultados con tu equipo y clientes</p>
                </div>
            </div>
        </div>
    </section>

    <!-- Scanner Section -->
    <section class="scanner" id="scanner">
        <div class="container">
            <div class="section-title">
                <h2>Escanea y Analiza</h2>
                <p>Utiliza nuestro escáner para evaluar la sostenibilidad de cualquier producto</p>
            </div>
            
            <div class="scanner-container">
                <div class="scanner-wrapper">
                    <video id="scanner-video" autoplay playsinline></video>
                    <canvas id="scanner-canvas"></canvas>
                    
                    <div id="camera-view" class="camera-view">
                        <div class="scanning-frame">
                            <i class="fas fa-camera"></i>
                            <p>Enfoca el código de barras del producto</p>
                        </div>
                    </div>
                    
                    <div class="camera-controls">
                        <button id="start-camera" class="btn btn-primary">
                            <i class="fas fa-camera"></i> Activar Cámara
                        </button>
                        <button id="capture-btn" class="btn btn-outline" disabled>
                            <i class="fas fa-camera"></i> Capturar Imagen
                        </button>
                        <button id="switch-camera" class="btn btn-outline" disabled>
                            <i class="fas fa-sync-alt"></i> Cambiar Cámara
                        </button>
                    </div>
                </div>
                
                <div class="scan-result" id="scanResult">
                    <div class="product-info">
                        <i class="fas fa-cube"></i>
                        <div>
                            <h4 id="productName">Producto Escaneado</h4>
                            <p id="productBrand">Marca del producto</p>
                        </div>
                    </div>
                    
                    <div class="sustainability-score">
                        <h3>Puntuación de Sostenibilidad</h3>
                        <div class="score-bar">
                            <div class="score-fill" id="scoreFill"></div>
                        </div>
                        <p><span class="score-value" id="scoreValue">0%</span> Sostenible</p>
                    </div>
                    
                    <div class="improvements">
                        <h3>Recomendaciones de Mejora</h3>
                        <ul class="improvement-list" id="improvementList">
                            <!-- Se llena dinámicamente -->
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Pricing Section -->
    <section class="pricing" id="pricing">
        <div class="container">
            <div class="section-title">
                <h2>Planes de Precios</h2>
                <p>Elige el plan que mejor se adapte a las necesidades de tu empresa</p>
            </div>
            
            <div class="pricing-plans">
                <!-- Plan Básico -->
                <div class="pricing-plan">
                    <h3>Básico</h3>
                    <div class="price">$29<span>/mes</span></div>
                    <p>Ideal para pequeñas empresas</p>
                    <ul class="features">
                        <li><i class="fas fa-check"></i> 50 escaneos/mes</li>
                        <li><i class="fas fa-check"></i> 5 productos</li>
                        <li><i class="fas fa-check"></i> Reportes básicos</li>
                        <li><i class="fas fa-check"></i> Soporte por email</li>
                    </ul>
                    <div class="paypal-button-container" data-plan="basico"></div>
                </div>
                
                <!-- Plan Profesional -->
                <div class="pricing-plan featured">
                    <div class="popular-badge">Más Popular</div>
                    <h3>Profesional</h3>
                    <div class="price">$79<span>/mes</span></div>
                    <p>Para empresas en crecimiento</p>
                    <ul class="features">
                        <li><i class="fas fa-check"></i> Escaneos ilimitados</li>
                        <li><i class="fas fa-check"></i> 50 productos</li>
                        <li><i class="fas fa-check"></i> Reportes avanzados</li>
                        <li><i class="fas fa-check"></i> Soporte prioritario</li>
                        <li><i class="fas fa-check"></i> API access</li>
                    </ul>
                    <div class="paypal-button-container" data-plan="profesional"></div>
                </div>
                
                <!-- Plan Empresarial -->
                <div class="pricing-plan">
                    <h3>Empresarial</h3>
                    <div class="price">$199<span>/mes</span></div>
                    <p>Para grandes corporaciones</p>
                    <ul class="features">
                        <li><i class="fas fa-check"></i> Escaneos ilimitados</li>
                        <li><i class="fas fa-check"></i> Productos ilimitados</li>
                        <li><i class="fas fa-check"></i> Reportes personalizados</li>
                        <li><i class="fas fa-check"></i> Soporte 24/7</li>
                        <li><i class="fas fa-check"></i> Onboarding dedicado</li>
                    </ul>
                    <div class="paypal-button-container" data-plan="empresarial"></div>
                </div>
            </div>
        </div>
    </section>

    <!-- Contact Section -->
    <section class="contact" id="contact">
        <div class="container">
            <div class="section-title">
                <h2>Contacto</h2>
                <p>¿Tienes preguntas? Estamos aquí para ayudarte</p>
            </div>
            <div class="contact-grid">
                <div class="contact-info">
                    <h3>Información de Contacto</h3>
                    <div class="contact-item">
                        <i class="fas fa-envelope"></i>
                        <div>
                            <h4>Email</h4>
                            <p>info@ecotag.com</p>
                        </div>
                    </div>
                    <div class="contact-item">
                        <i class="fas fa-phone"></i>
                        <div>
                            <h4>Teléfono</h4>
                            <p>+34 912 345 678</p>
                        </div>
                    </div>
                    <div class="contact-item">
                        <i class="fas fa-map-marker-alt"></i>
                        <div>
                            <h4>Ubicación</h4>
                            <p>Madrid, España</p>
                        </div>
                    </div>
                </div>
                <div class="contact-form">
                    <h3>Envíanos un Mensaje</h3>
                    <form id="contactForm">
                        <div class="form-group">
                            <input type="text" placeholder="Nombre" required>
                        </div>
                        <div class="form-group">
                            <input type="email" placeholder="Email" required>
                        </div>
                        <div class="form-group">
                            <textarea placeholder="Mensaje" rows="5" required></textarea>
                        </div>
                        <button type="submit" class="btn btn-primary">Enviar Mensaje</button>
                    </form>
                </div>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer>
        <div class="container">
            <div class="footer-content">
                <div class="footer-column">
                    <h3>Eco Tag</h3>
                    <p>La plataforma líder en análisis de sostenibilidad para productos de consumo.</p>
                    <div class="social-links">
                        <a href="#"><i class="fab fa-twitter"></i></a>
                        <a href="#"><i class="fab fa-linkedin"></i></a>
                        <a href="#"><i class="fab fa-github"></i></a>
                    </div>
                </div>
                
                <div class="footer-column">
                    <h3>Enlaces Rápidos</h3>
                    <ul>
                        <li><a href="#home">Inicio</a></li>
                        <li><a href="#features">Características</a></li>
                        <li><a href="#scanner">Escáner</a></li>
                        <li><a href="#pricing">Precios</a></li>
                    </ul>
                </div>
                
                <div class="footer-column">
                    <h3>Legal</h3>
                    <ul>
                        <li><a href="#">Términos de Servicio</a></li>
                        <li><a href="#">Política de Privacidad</a></li>
                        <li><a href="#">Cookies</a></li>
                    </ul>
                </div>
                
                <div class="footer-column">
                    <h3>Recursos</h3>
                    <ul>
                        <li><a href="#">Documentación</a></li>
                        <li><a href="#">Centro de Ayuda</a></li>
                        <li><a href="#">Blog</a></li>
                        <li><a href="#">API</a></li>
                    </ul>
                </div>
            </div>
            
            <div class="footer-bottom">
                <p>&copy; 2024 Eco Tag - Todos los derechos reservados</p>
            </div>
        </div>
    </footer>

    <!-- Modales -->
    <div class="modal" id="loginModal">
        <div class="modal-content">
            <span class="close">&times;</span>
            <h2>Iniciar Sesión</h2>
            <form id="loginForm">
                <div class="form-group">
                    <label for="loginEmail">Email</label>
                    <input type="email" id="loginEmail" placeholder="tu@empresa.com" required>
                </div>
                <div class="form-group">
                    <label for="loginPassword">Contraseña</label>
                    <input type="password" id="loginPassword" placeholder="••••••••" required>
                </div>
                <button type="submit" class="btn btn-primary btn-block">
                    <span id="loginText">Iniciar Sesión</span>
                    <span class="btn-spinner" id="loginSpinner" style="display: none;">
                        <i class="fas fa-spinner fa-spin"></i>
                    </span>
                </button>
                  <!-- ✅ NUEVO: Enlace "Olvidé contraseña" -->
            <div class="form-footer" style="text-align: center; margin-top: 15px;">
                <p>
                    <a href="#" id="forgotPasswordLink" style="color: var(--primary); text-decoration: none;">
                        ¿Olvidaste tu contraseña?
                    </a>
                </p>
                <p>¿No tienes cuenta? <a href="#" id="goToRegister">Regístrate aquí</a></p>
            </div>
        </form>
    </div>
</div>
<!-- Modal de Recuperación de Contraseña -->
<div class="modal" id="forgotPasswordModal">
    <div class="modal-content">
        <span class="close">&times;</span>
        <h2>Recuperar Contraseña</h2>
        <p style="margin-bottom: 20px; color: #666;">
            Te enviaremos un enlace a tu email para restablecer tu contraseña.
        </p>
        <form id="forgotPasswordForm">
            <div class="form-group">
                <label for="resetEmail">Email</label>
                <input type="email" id="resetEmail" placeholder="tu@empresa.com" required>
            </div>
            <button type="submit" class="btn btn-primary btn-block">
                <span id="resetText">Enviar Enlace</span>
                <span class="btn-spinner" id="resetSpinner" style="display: none;">
                    <i class="fas fa-spinner fa-spin"></i>
                </span>
            </button>
        </form>
        <div class="form-footer" style="text-align: center; margin-top: 15px;">
            <p>
                <a href="#" id="backToLogin" style="color: var(--primary); text-decoration: none;">
                    ← Volver al Login
                </a>
            </p>
      </div>
    </div>

                    <div class="form-footer"></div>
            <p>¿No tienes cuenta? <a href="#" id="goToRegister">Regístrate aquí</a></p>
                </div>
            </form>
        </div>
    </div>

    <div class="modal" id="registerModal">
        <div class="modal-content">
            <span class="close">&times;</span>
            <h2>Crear Cuenta</h2>
            <form id="registerForm">
                <div class="form-group">
                    <label for="registerCompany">Empresa</label>
                    <input type="text" id="registerCompany" placeholder="Nombre de tu empresa" required>
                </div>
                <div class="form-group">
                    <label for="registerEmail">Email</label>
                    <input type="email" id="registerEmail" placeholder="tu@empresa.com" required>
                </div>
                <div class="form-group">
                    <label for="registerPassword">Contraseña</label>
                    <input type="password" id="registerPassword" placeholder="••••••••" required>
                </div>
                <div class="form-group">
                    <label for="registerConfirmPassword">Confirmar Contraseña</label>
                    <input type="password" id="registerConfirmPassword" placeholder="••••••••" required>
                </div>
                <div class="form-group">
                    <label for="registerPlan">Plan</label>
                    <select id="registerPlan" required>
                        <option value="">Selecciona un plan</option>
                        <option value="basico">Básico ($29/mes)</option>
                        <option value="profesional">Profesional ($79/mes)</option>
                        <option value="empresarial">Empresarial ($199/mes)</option>
                    </select>
                </div>
                <button type="submit" class="btn btn-primary btn-block" id="registerSubmit">
                    <span id="registerText">Crear Cuenta</span>
                    <span class="btn-spinner" id="registerSpinner" style="display: none;">
                        <i class="fas fa-spinner fa-spin"></i>
                    </span>
                </button>
                <div class="form-footer">
                    <p>¿Ya tienes cuenta? <a href="#" id="goToLogin">Inicia sesión aquí</a></p>
                </div>
            </form>
        </div>
    </div>

    <!-- Scripts en orden crítico -->
    <script src="firebase-config.js"></script>
    <script src="CacheManager.js"></script>
    <script src="api.js"></script>
    <script src="app.js"></script>
    
    <!-- Analytics (opcional) -->
    <script>
        // Google Analytics
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', 'GA_MEASUREMENT_ID');
    </script>
</body>
</html>